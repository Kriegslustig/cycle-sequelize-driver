"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function define(){for(var e=arguments.length,r=Array(e),n=0;e>n;n++)r[n]=arguments[n];return[defineKey].concat(["string"==typeof r[0]?[].concat(r):r])}function executeDefinitions(e,r){var n=r.reduce(function(r,n){var t=(0,_slicedToArray3["default"])(n,2),i=t[0],o=t[1],u=new _rx.BehaviorSubject,a=(0,_findCache2["default"])(u);return r.set(i,e.define(i,o,{afterCreate:function(){return u.onNext(i)},afterDestroy:function(){return u.onNext(i)},afterUpdate:function(){return u.onNext(i)}})).update(i,function(e){return e.__cycleCache={findOne:(0,_findOne.initFindOne)(a,e),modelCache:a,change$:u},e})},(0,_immutable.Map)());return _rx.Observable.create(function(e){_promise2["default"].all.apply(_promise2["default"],(0,_toConsumableArray3["default"])(n.map(function(e){return e.sync()}))).then(function(){for(var r=arguments.length,n=Array(r),t=0;r>t;t++)n[t]=arguments[t];e.onNext(n.reduce(function(e,r){var n=(0,_slicedToArray3["default"])(r,2),t=n[0],i=n[1];return e.set(t,i)},(0,_immutable.Map)())),e.onCompleted()})["catch"](function(r){return e.onError(r)})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.defineKey=void 0;var _promise=require("babel-runtime/core-js/promise"),_promise2=_interopRequireDefault(_promise),_toConsumableArray2=require("babel-runtime/helpers/toConsumableArray"),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_slicedToArray2=require("babel-runtime/helpers/slicedToArray"),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_for=require("babel-runtime/core-js/symbol/for"),_for2=_interopRequireDefault(_for);exports.define=define,exports.executeDefinitions=executeDefinitions;var _rx=require("rx"),_immutable=require("immutable"),_findOne=require("./findOne"),_findCache=require("./findCache"),_findCache2=_interopRequireDefault(_findCache),defineKey=exports.defineKey=(0,_for2["default"])("sequelize define action");